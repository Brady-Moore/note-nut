import { _ as __nuxt_component_0 } from './Logo-D0I1XJAn.mjs';
import { ref, computed, mergeProps, unref, useSSRContext } from 'vue';
import { ssrRenderAttrs, ssrRenderComponent, ssrRenderList, ssrRenderClass, ssrInterpolate } from 'vue/server-renderer';
import { _ as _export_sfc } from './server.mjs';
import Swal from 'sweetalert2';
import '../routes/renderer.mjs';
import 'vue-bundle-renderer/runtime';
import '../nitro/nitro.mjs';
import 'node:http';
import 'node:https';
import 'node:events';
import 'node:buffer';
import 'node:fs';
import 'node:path';
import 'node:crypto';
import 'unhead/server';
import 'devalue';
import 'unhead/utils';
import 'unhead/plugins';
import 'vue-router';
import 'jsonwebtoken';

const _sfc_main$2 = {};
function _sfc_ssrRender$1(_ctx, _push, _parent, _attrs) {
  _push(`<svg${ssrRenderAttrs(mergeProps({
    width: "17",
    height: "17",
    viewBox: "0 0 17 17",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, _attrs))}><path d="M4.04679 12.5839L5.30879 9.42887C5.50994 8.92625 5.81102 8.4697 6.19379 8.08687L13.1138 1.16887C13.5116 0.771042 14.0512 0.547546 14.6138 0.547546C15.1764 0.547546 15.716 0.771042 16.1138 1.16887C16.5116 1.56669 16.7351 2.10626 16.7351 2.66887C16.7351 3.23148 16.5116 3.77104 16.1138 4.16887L9.19379 11.0869C8.81079 11.4699 8.35379 11.7719 7.85079 11.9729L4.69679 13.2349C4.60593 13.2712 4.50639 13.2801 4.41051 13.2605C4.31464 13.2408 4.22664 13.1934 4.15743 13.1242C4.08823 13.055 4.04085 12.967 4.02119 12.8711C4.00152 12.7753 4.01042 12.6757 4.04679 12.5849V12.5839Z" fill="#6D6D73"></path><path d="M2.11377 4.41687C2.11377 3.72687 2.67377 3.16687 3.36377 3.16687H8.61377C8.81268 3.16687 9.00345 3.08785 9.1441 2.9472C9.28475 2.80655 9.36377 2.61578 9.36377 2.41687C9.36377 2.21796 9.28475 2.02719 9.1441 1.88654C9.00345 1.74589 8.81268 1.66687 8.61377 1.66687H3.36377C2.63442 1.66687 1.93495 1.9566 1.41923 2.47233C0.903501 2.98805 0.61377 3.68752 0.61377 4.41687V13.9169C0.61377 14.6462 0.903501 15.3457 1.41923 15.8614C1.93495 16.3771 2.63442 16.6669 3.36377 16.6669H12.8638C13.5931 16.6669 14.2926 16.3771 14.8083 15.8614C15.324 15.3457 15.6138 14.6462 15.6138 13.9169V8.66687C15.6138 8.46796 15.5348 8.27719 15.3941 8.13654C15.2534 7.99589 15.0627 7.91687 14.8638 7.91687C14.6649 7.91687 14.4741 7.99589 14.3334 8.13654C14.1928 8.27719 14.1138 8.46796 14.1138 8.66687V13.9169C14.1138 14.6069 13.5538 15.1669 12.8638 15.1669H3.36377C2.67377 15.1669 2.11377 14.6069 2.11377 13.9169V4.41687Z" fill="#6D6D73"></path></svg>`);
}
const _sfc_setup$2 = _sfc_main$2.setup;
_sfc_main$2.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/PencilIcon.vue");
  return _sfc_setup$2 ? _sfc_setup$2(props, ctx) : void 0;
};
const __nuxt_component_1 = /* @__PURE__ */ _export_sfc(_sfc_main$2, [["ssrRender", _sfc_ssrRender$1]]);
const _sfc_main$1 = {};
function _sfc_ssrRender(_ctx, _push, _parent, _attrs) {
  _push(`<svg${ssrRenderAttrs(mergeProps({
    width: "15",
    height: "19",
    viewBox: "0 0 15 19",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, _attrs))}><path fill-rule="evenodd" clip-rule="evenodd" d="M6.75009 0.27066C6.02075 0.27066 5.32127 0.560392 4.80555 1.07612C4.28982 1.59184 4.00009 2.29132 4.00009 3.02066V3.46366C3.20509 3.54066 2.41609 3.63966 1.63509 3.76166C1.53634 3.77511 1.44126 3.80811 1.35541 3.85873C1.26956 3.90935 1.19465 3.97657 1.13508 4.05647C1.0755 4.13637 1.03245 4.22734 1.00843 4.32406C0.984414 4.42079 0.979916 4.52133 0.9952 4.61982C1.01048 4.7183 1.04524 4.81275 1.09745 4.89765C1.14965 4.98255 1.21825 5.05619 1.29924 5.11427C1.38023 5.17235 1.47199 5.21371 1.56914 5.23593C1.6663 5.25814 1.76691 5.26077 1.86509 5.24366L2.01409 5.22166L2.85509 15.7397C2.91015 16.4289 3.22279 17.072 3.73075 17.5411C4.23871 18.0101 4.9047 18.2706 5.59609 18.2707H10.4031C11.0945 18.2709 11.7606 18.0106 12.2687 17.5418C12.7769 17.0729 13.0898 16.4298 13.1451 15.7407L13.9861 5.22066L14.1351 5.24366C14.3298 5.27018 14.5271 5.21924 14.6847 5.10177C14.8422 4.98431 14.9473 4.80972 14.9775 4.61554C15.0076 4.42137 14.9603 4.22312 14.8458 4.06344C14.7313 3.90376 14.5587 3.7954 14.3651 3.76166C13.5798 3.63944 12.7911 3.54007 12.0001 3.46366V3.02066C12.0001 2.29132 11.7104 1.59184 11.1946 1.07612C10.6789 0.560392 9.97944 0.27066 9.25009 0.27066H6.75009ZM8.00009 3.27066C8.84009 3.27066 9.67309 3.29566 10.5001 3.34566V3.02066C10.5001 2.33066 9.94009 1.77066 9.25009 1.77066H6.75009C6.06009 1.77066 5.50009 2.33066 5.50009 3.02066V3.34566C6.32709 3.29566 7.16009 3.27066 8.00009 3.27066ZM6.58009 6.99066C6.57213 6.79175 6.48549 6.60414 6.33921 6.46912C6.19293 6.33409 5.999 6.2627 5.80009 6.27066C5.60118 6.27862 5.41357 6.36527 5.27855 6.51154C5.14352 6.65782 5.07213 6.85175 5.08009 7.05066L5.38009 14.5507C5.38403 14.6492 5.40733 14.7459 5.44866 14.8354C5.48999 14.9249 5.54854 15.0053 5.62097 15.0722C5.6934 15.1391 5.77829 15.191 5.8708 15.2251C5.9633 15.2591 6.0616 15.2746 6.16009 15.2707C6.25858 15.2667 6.35533 15.2434 6.44482 15.2021C6.53431 15.1608 6.61478 15.1022 6.68163 15.0298C6.74849 14.9573 6.80043 14.8725 6.83448 14.78C6.86853 14.6875 6.88403 14.5892 6.88009 14.4907L6.58009 6.99066ZM10.9201 7.05066C10.924 6.95217 10.9085 6.85387 10.8745 6.76136C10.8404 6.66886 10.7885 6.58397 10.7216 6.51154C10.6548 6.43911 10.5743 6.38056 10.4848 6.33923C10.3953 6.2979 10.2986 6.2746 10.2001 6.27066C10.0012 6.2627 9.80725 6.33409 9.66097 6.46912C9.5147 6.60414 9.42805 6.79175 9.42009 6.99066L9.12009 14.4907C9.11615 14.5892 9.13165 14.6875 9.1657 14.78C9.19975 14.8725 9.25169 14.9573 9.31855 15.0298C9.38541 15.1022 9.46588 15.1608 9.55536 15.2021C9.64485 15.2434 9.7416 15.2667 9.84009 15.2707C9.93858 15.2746 10.0369 15.2591 10.1294 15.2251C10.2219 15.191 10.3068 15.1391 10.3792 15.0722C10.4516 15.0053 10.5102 14.9249 10.5515 14.8354C10.5929 14.7459 10.6162 14.6492 10.6201 14.5507L10.9201 7.05066Z" fill="currentColor"></path></svg>`);
}
const _sfc_setup$1 = _sfc_main$1.setup;
_sfc_main$1.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/TrashIcon.vue");
  return _sfc_setup$1 ? _sfc_setup$1(props, ctx) : void 0;
};
const __nuxt_component_2 = /* @__PURE__ */ _export_sfc(_sfc_main$1, [["ssrRender", _sfc_ssrRender]]);
const _sfc_main = {
  __name: "index",
  __ssrInlineRender: true,
  setup(__props) {
    const updatedNote = ref("");
    const notes = ref([]);
    const selectedNote = ref(null);
    ref(null);
    ref("");
    async function deleteNote() {
      var _a, _b;
      const { isConfirmed } = await Swal.fire({
        title: "Deletion Confirmation",
        text: "Are you sure you'd like to delete this note permanently? You will not be able to recover it after this.",
        icon: "warning",
        confirmButtonText: "Delete Permanently",
        showCancelButton: true
      });
      if (isConfirmed) {
        await $fetch(`/api/notes/${selectedNote.value.id}`, {
          method: "DELETE"
        });
        const index = notes.value.findIndex((note) => {
          return note.id === selectedNote.value.id;
        });
        if (index !== -1) {
          const deletedSelected = notes.value[index].id === ((_a = selectedNote.value) == null ? void 0 : _a.id);
          notes.value.splice(index, 1);
          if (deletedSelected) {
            selectedNote.value = (_b = notes.value[0]) != null ? _b : null;
            updatedNote.value = selectedNote.value ? selectedNote.value.text : "";
          }
        }
      }
    }
    const todaysNotes = computed(() => {
      return notes.value.filter((note) => {
        const noteDate = new Date(note.updatedAt);
        return noteDate.toDateString() === (/* @__PURE__ */ new Date()).toDateString();
      });
    });
    const yesterdaysNotes = computed(() => {
      const yesterday = /* @__PURE__ */ new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      return notes.value.filter((note) => {
        const noteDate = new Date(note.updatedAt);
        return noteDate.toDateString() === yesterday.toDateString();
      });
    });
    const pastNotes = computed(() => {
      const yesterday = /* @__PURE__ */ new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      return notes.value.filter((note) => {
        const noteDate = new Date(note.updatedAt);
        return noteDate < yesterday && noteDate.toDateString() !== yesterday.toDateString();
      });
    });
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Logo = __nuxt_component_0;
      const _component_PencilIcon = __nuxt_component_1;
      const _component_TrashIcon = __nuxt_component_2;
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "flex bg-zinc-900 h-screen" }, _attrs))}><div class="bg-black w-[330px] p-7 flex flex-col overflow-scroll"><div>`);
      _push(ssrRenderComponent(_component_Logo, null, null, _parent));
      _push(`</div><div class="flex-grow"><p class="text-xs font-bold text-zinc-300 mt-7 mb-3">Today</p><div class="pl-2 space-y-2"><!--[-->`);
      ssrRenderList(unref(todaysNotes), (note) => {
        _push(`<div class="${ssrRenderClass([{ "bg-yellow-500": unref(selectedNote) && note.id === unref(selectedNote).id, "hover:bg-yellow-500/20": !unref(selectedNote) || note.id !== unref(selectedNote).id }, "p-2 rounded-lg cursor-pointer"])}"><h3 class="text-sm font-bold text-white truncate">${ssrInterpolate(note.text.substring(0, 40))}</h3><div class="leading-none truncate text-zinc-400"><span class="text-xs text-white mr-4">${ssrInterpolate(new Date(note.updatedAt).toLocaleDateString())}</span>`);
        if (note.text.length > 50) {
          _push(`<span class="text-xs text-zinc-400">... ${ssrInterpolate(note.text.substring(50, 90))}</span>`);
        } else {
          _push(`<!---->`);
        }
        _push(`</div></div>`);
      });
      _push(`<!--]--></div></div><div class="flex-grow"><p class="text-xs font-bold text-zinc-300 mt-7 mb-3">Yesterday</p><div class="pl-2 space-y-2"><!--[-->`);
      ssrRenderList(unref(yesterdaysNotes), (note) => {
        _push(`<div class="${ssrRenderClass([{ "bg-yellow-500": unref(selectedNote) && note.id === unref(selectedNote).id, "hover:bg-yellow-500/20": !unref(selectedNote) || note.id !== unref(selectedNote).id }, "p-2 rounded-lg cursor-pointer"])}"><h3 class="text-sm font-bold text-white truncate">${ssrInterpolate(note.text.substring(0, 40))}</h3><div class="leading-none truncate text-zinc-400"><span class="text-xs text-white mr-4">${ssrInterpolate(new Date(note.updatedAt).toDateString() === (/* @__PURE__ */ new Date()).toDateString() ? "Today" : new Date(note.updatedAt).toLocaleDateString())}</span>`);
        if (note.text.length > 50) {
          _push(`<span class="text-xs text-zinc-400">... ${ssrInterpolate(note.text.substring(50, 90))}</span>`);
        } else {
          _push(`<!---->`);
        }
        _push(`</div></div>`);
      });
      _push(`<!--]--></div></div><div class="flex-grow"><p class="text-xs font-bold text-zinc-300 mt-7 mb-3">Past</p><div class="pl-2 space-y-2"><!--[-->`);
      ssrRenderList(unref(pastNotes), (note) => {
        _push(`<div class="${ssrRenderClass([{ "bg-yellow-500": unref(selectedNote) && note.id === unref(selectedNote).id, "hover:bg-yellow-500/20": !unref(selectedNote) || note.id !== unref(selectedNote).id }, "p-2 rounded-lg cursor-pointer"])}"><h3 class="text-sm font-bold text-white truncate">${ssrInterpolate(note.text.substring(0, 40))}</h3><div class="leading-none truncate text-zinc-400"><span class="text-xs text-white mr-4">${ssrInterpolate(new Date(note.updatedAt).toDateString() === (/* @__PURE__ */ new Date()).toDateString() ? "Today" : new Date(note.updatedAt).toLocaleDateString())}</span>`);
        if (note.text.length > 50) {
          _push(`<span class="text-xs text-zinc-400">... ${ssrInterpolate(note.text.substring(50, 90))}</span>`);
        } else {
          _push(`<!---->`);
        }
        _push(`</div></div>`);
      });
      _push(`<!--]--></div></div></div><div class="w-full flex flex-col"><div class="flex justify-between w-full items-start p-8"><button class="inline-flex items-center text-s text-[#C2C2C5] hover:text-white font-bold space-x-2">`);
      _push(ssrRenderComponent(_component_PencilIcon, null, null, _parent));
      _push(`<span>Create Note</span></button><button>`);
      _push(ssrRenderComponent(_component_TrashIcon, {
        class: "text-[#6D6D73] hover:text-white text-s",
        onClick: deleteNote
      }, null, _parent));
      _push(`</button></div><div class="max-w-[437px] mx-auto w-full flex-grow flex flex-col">`);
      if (unref(selectedNote)) {
        _push(`<p class="text-zinc-300 font-playfair">${ssrInterpolate(new Date(unref(selectedNote).updatedAt).toLocaleDateString())}</p>`);
      } else {
        _push(`<p class="text-zinc-400 italic"> No note selected </p>`);
      }
      _push(`<textarea name="note" id="note" class="text-zinc-100 bg-transparent w-full my-3 font-playfair focus:outline-none resize-none flex-grow">${ssrInterpolate(unref(updatedNote))}</textarea></div><button class="text-zinc-300 hover:text-white text-sm font-bold absolute right-3 bottom-3 p-3"> Log Out </button></div></div>`);
    };
  }
};
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("pages/index.vue");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};

export { _sfc_main as default };
//# sourceMappingURL=index-CspIVQ2R.mjs.map
